<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Personality OS Dashboard</title>
<style>
:root {
  --primary: #4c6ef5;
  --secondary: #e9edff;
  --background: #f7f9fc;
  --card-bg: #ffffff;
  --border-color: #d0d7e2;
}
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
  background-color: var(--background);
  color: #333;
}
header {
  background-color: var(--primary);
  color: white;
  padding: 20px;
  border-radius: 8px;
}
h1 { margin: 0; }
section { margin-top: 20px; }
.card {
  background-color: var(--card-bg);
  border: 1px solid var(--border-color);
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 6px;
}
button {
  background-color: var(--primary);
  color: white;
  border: none;
  padding: 6px 12px;
  margin-top: 4px;
  border-radius: 4px;
  cursor: pointer;
}
button.completed { background-color: #2f9e44; }
table.calendar {
  width: 100%;
  border-collapse: collapse;
}
table.calendar th, table.calendar td {
  border: 1px solid var(--border-color);
  padding: 8px;
}
.completed-row { opacity: 0.6; text-decoration: line-through; }
</style>
</head>
<body>
<header>
  <h1>Personality OS Dashboard</h1>
  <p>Track your growth using psychological frameworks and personal insights.</p>
</header>

<section id="overview">
 <h2>Overview</h2>
 <p>This dashboard uses models like the Iceberg Model, Big Five Traits, Self‑Determination Theory (SDT) and PERMA to guide self‑development. Use the sections below to reflect on your behaviours and beliefs.</p>
</section>

<section id="learningCalendar">
 <h2>Learning & Reflection Calendar (Next 3 Months)</h2>
 <p>Each day includes a micro-learning topic, a journaling prompt or an essay question. Mark complete when done!</p>
 <div id="learningTable"></div>
</section>

<section id="workoutCalendar">
 <h2>Workout & Weight Log</h2>
 <p>Weekly routine: 2 days swimming, 2 days weights, 2 days sports, Wednesdays off. Record your weight daily.</p>
 <div id="workoutTable"></div>
</section>

<section id="notes">
 <h2>Growth Log & Notes</h2>
 <p>Add notes about daily wins, challenges and reflections. Tag them to frameworks or traits.</p>
 <textarea id="noteInput" rows="4" style="width:100%;" placeholder="Write your note here..."></textarea><br>
 <button id="addNoteBtn">Add Note</button>
 <ul id="notesList"></ul>
</section>

<script>
// Utility to format date as YYYY-MM-DD
function formatDate(d) {
  const year = d.getFullYear();
  const month = String(d.getMonth()+1).padStart(2,'0');
  const day = String(d.getDate()).padStart(2,'0');
  return `${year}-${month}-${day}`;
}

// Micro learning & journaling topics rotation
const topics = [
  {type:'Micro Learning', text:'Learn about the Iceberg Model and identify hidden beliefs behind actions.'},
  {type:'Journaling', text:'Reflect on a recent challenge and how you felt beneath the surface.'},
  {type:'Deep Thinking', text:'Write an essay on how your beliefs influence your behaviour.'},
  {type:'Micro Learning', text:'Explore the Big Five traits and note where you score high or low.'},
  {type:'Journaling', text:'Write about a time you felt autonomous, competent, and connected.'},
  {type:'Deep Thinking', text:'Consider what flourishing means to you in the context of PERMA.'}
];

// Workout schedule mapping by day of week (0=Sunday)
const workoutSchedule = {
  0: 'Sports',     // Sunday
  1: 'Swimming',   // Monday
  2: 'Weights',    // Tuesday
  3: 'Rest',       // Wednesday (off)
  4: 'Sports',     // Thursday
  5: 'Swimming',   // Friday
  6: 'Weights'     // Saturday
};

// Generate learning calendar for next 90 days
function renderLearningCalendar() {
  const container = document.getElementById('learningTable');
  let html = '<table class="calendar"><tr><th>Date</th><th>Activity</th><th>Action</th></tr>';
  const start = new Date();
  for(let i=0; i<90; i++) {
    const date = new Date(start);
    date.setDate(start.getDate() + i);
    const dateStr = formatDate(date);
    const topic = topics[i % topics.length];
    const key = 'learningComplete_' + dateStr;
    const completed = localStorage.getItem(key) === 'true';
    html += `<tr class="${completed ? 'completed-row' : ''}">
      <td>${dateStr}</td>
      <td><strong>${topic.type}:</strong> ${topic.text}</td>
      <td><button data-date="${dateStr}" class="learnBtn ${completed ? 'completed' : ''}">${completed ? 'Done' : 'Mark Complete'}</button></td>
    </tr>`;
  }
  html += '</table>';
  container.innerHTML = html;

  // attach event listeners
  document.querySelectorAll('.learnBtn').forEach(btn => {
    btn.addEventListener('click', function() {
      const dateStr = this.getAttribute('data-date');
      const key = 'learningComplete_' + dateStr;
      const isDone = localStorage.getItem(key) === 'true';
      if(!isDone) {
        localStorage.setItem(key, 'true');
      } else {
        localStorage.removeItem(key);
      }
      renderLearningCalendar();
    });
  });
}

// Generate workout calendar for next 90 days
function renderWorkoutCalendar() {
  const container = document.getElementById('workoutTable');
  let html = '<table class="calendar"><tr><th>Date</th><th>Workout</th><th>Weight (kg)</th><th>Action</th></tr>';
  const start = new Date();
  for(let i=0; i<90; i++) {
    const date = new Date(start);
    date.setDate(start.getDate() + i);
    const dateStr = formatDate(date);
    const day = date.getDay();
    const workout = workoutSchedule[day];
    const completeKey = 'workoutComplete_' + dateStr;
    const weightKey = 'weight_' + dateStr;
    const completed = localStorage.getItem(completeKey) === 'true';
    const weightVal = localStorage.getItem(weightKey) || '';
    html += `<tr class="${completed ? 'completed-row' : ''}">
      <td>${dateStr}</td>
      <td>${workout}</td>
      <td><input type="number" step="0.1" min="0" style="width:80px;" data-date="${dateStr}" class="weightInput" value="${weightVal}" ${workout === 'Rest' ? 'disabled' : ''}></td>
      <td><button data-date="${dateStr}" class="workoutBtn ${completed ? 'completed' : ''}" ${workout === 'Rest' ? 'disabled' : ''}>${workout === 'Rest' ? 'Rest Day' : (completed ? 'Done' : 'Mark Complete')}</button></td>
    </tr>`;
  }
  html += '</table>';
  container.innerHTML = html;

  // attach weight input listeners
  document.querySelectorAll('.weightInput').forEach(input => {
    input.addEventListener('change', function() {
      const dateStr = this.getAttribute('data-date');
      const weightKey = 'weight_' + dateStr;
      if(this.value) {
        localStorage.setItem(weightKey, this.value);
      } else {
        localStorage.removeItem(weightKey);
      }
    });
  });

  // attach workout button listeners
  document.querySelectorAll('.workoutBtn').forEach(btn => {
    btn.addEventListener('click', function() {
      const dateStr = this.getAttribute('data-date');
      const completeKey = 'workoutComplete_' + dateStr;
      const isDone = localStorage.getItem(completeKey) === 'true';
      if(!isDone) {
        localStorage.setItem(completeKey, 'true');
      } else {
        localStorage.removeItem(completeKey);
      }
      renderWorkoutCalendar();
    });
  });
}

// Notes functions
function loadNotes() {
 const notes = JSON.parse(localStorage.getItem('notes') || '[]');
 const list = document.getElementById('notesList');
 list.innerHTML = '';
 notes.forEach((note) => {
   const li = document.createElement('li');
   li.textContent = note;
   list.appendChild(li);
 });
}

document.getElementById('addNoteBtn').addEventListener('click', function() {
 const input = document.getElementById('noteInput');
 const text = input.value.trim();
 if (text) {
   const notes = JSON.parse(localStorage.getItem('notes') || '[]');
   notes.push(text);
   localStorage.setItem('notes', JSON.stringify(notes));
   input.value = '';
   loadNotes();
 }
});

// Initialize
renderLearningCalendar();
renderWorkoutCalendar();
loadNotes();

</script>
</body>
</html>
